### 网易云歌词图片识别
1 .   
![picture 0](images/de275132cd8f4eb3b62a9cddea2a8e2534cd4bb97c29747da284743e5b282bc4.png)  

代码如下：  
```python
import os
from PIL import Image
import pytesseract

# 设置Tesseract可执行文件的路径（根据你的安装路径进行修改）
pytesseract.pytesseract.tesseract_cmd = r'D:\Software\forStudy\Tesseract_OCR\tesseract.exe'


def extract_song_names_from_images(image_folder, output_file):
    # 打开输出文件
    with open(output_file, 'w', encoding='utf-8') as f:
        # 遍历图像文件夹中的所有文件
        for filename in os.listdir(image_folder):
            if filename.lower().endswith(('.png', '.jpg', '.jpeg', '.bmp', '.gif', '.tiff')):
                # 构建图像的完整路径
                image_path = os.path.join(image_folder, filename)

                # 打开图像
                img = Image.open(image_path)

                # 使用Tesseract进行OCR识别，指定语言模型（可以添加多个语言，如'eng+rus+jpn'）
                text = pytesseract.image_to_string(img, lang='eng+rus+jpn+chi_sim')

                # 假设歌名在识别出的文本中，你可以根据需要进一步处理文本
                # 例如，使用正则表达式来提取特定的歌名格式
                f.write(text.strip() + '\n')
                print(f"Processed {filename}")


if __name__ == "__main__":
    image_folder = r'D:\MygroupFriends2024Music'  # 替换为你的图像文件夹路径
    output_file = 'song_names.txt'  # 输出TXT文件的路径
    extract_song_names_from_images(image_folder, output_file)
    print("Processing completed. Song names have been saved to", output_file)
```

2 .   
![picture 1](images/729b9074fc5e0dabce4757c56e07283337c5a0d3746d426c08c24b6196023c74.png)  

3 .   
![picture 2](images/891b1480bd7a942fdfb844804b28780e73dc202501f5b12ceda13f7376e06dec.png)  
![picture 3](images/858d135e744fa8c39be0805f53be154b2d19dbf4b3a4ae9c1fd3087c4b5dbaa6.png)  
![picture 4](images/edbc081d16d26b1b89d0bf98873d97f0e0e63de01e2c387b943869be1aa31941.png)  
![picture 5](images/659f0c8716019e3378e7bea45412a49ce35090eca6bf739bd8a1e57a96704bf3.png)  
更改成你下的解释器的位置。  

4 .   
![picture 6](images/a6bc5f77843505f4f14dcaf5d658b56c3660402171ae08455138f78846c7beb9.png)  
【鸦补充：其实不用上面那么麻烦，按照1 .中ai说的那么做就行了。  
![picture 7](images/862091357d3b57a858c598e1e73e63b7eeb81494e93f91cce4917fdbe07d1b4a.png)  
![picture 8](images/9f651f7c8649434ee8722f592cbd43bb779b891fa2f463079b4c6450ffe4c2e0.png)  

5 .   
pip快一点的方法。  
![picture 9](images/6cde3a23f0b905a5124686301571108ce5c56c51a44cd2695fcf3ae692c52ccd.png)  

6 .   
![picture 10](images/a357bfe8601622cf772b53e46a83899a6f81fde51501c5fb8d45deeefba49b31.png)  
![picture 11](images/604389adadf7842f5dad57457de6c401268021012ce613d16eb87cc59770e503.png)  

7 .  我下载的tesseract没有语言扩展包  
![picture 12](images/9db1da8c0a578e4627e1beee3ecd0913ec2cd83556f5b6835cafcf857b34313c.png)  
所以我去外面下了语言扩展包：  
https://blog.csdn.net/qq_47571357/article/details/132017514  
直接复制到：  
D:\Software\forStudy\Tesseract_OCR\tessdata  
这个地址底下。  

8 .然后再用代码调用AI接口，向AI提问。  
```python
import os
import openai

os.environ['OPENAI_API_KEY'] = 'sk-6016da4740a14de08c591278eb6684c0'
os.environ['OPENAI_BASE_URL'] = 'https://api.deepseek.com/v1'

client = openai.OpenAI()


input_file = 'song_names.txt'
output_file = 'outputSongsName.txt'

# 打开原始TXT文件并读取内容
with open('song_names.txt', 'r', encoding='utf-8') as original_file:
    content = original_file.read()


def ask(question):
    response = client.chat.completions.create(
        model="deepseek-chat",
        messages=[
            {"role": "system", "content": "You are a helpful assistant"},
            {"role": "user", "content": question},
        ],
        stream=False
    )
    return response.choices[0].message.content



processed_content = ask('从下一个"niyaochulidewenziruxia"开始是你要处理的文本，处理文本要求：请将以下由图片识别的文字文本其中是歌名的部分转换成这种格式："歌名:歌手名字\n"输出字符串。有些文本只有歌手名字，文本附近没有歌名的，请选取该歌手三个热门歌曲按照以上格式输出字符串。niyaochulidewenziruxia\n'+content)


# 将处理后的内容写入新的TXT文件
with open('outputSongsName.txt', 'w', encoding='utf-8') as processed_file:
    processed_file.write(processed_content)

# 文件会在with语句块结束时自动关闭
```

这个key可以42.58 万个单词。  

9 . 一些思考：  
（1）格式："歌名:歌手名字\n"
的冒号是否换成\t识别出的更多。  

（2）第一遍outputSongsName.txt里也有很多乱码，是否下次可以让ai二次洗一下文本。  
